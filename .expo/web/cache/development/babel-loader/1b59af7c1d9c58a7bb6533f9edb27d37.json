{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/fatmabetuluyar/Downloads/firebase-push-notification-recipes-app/src/screens/AddRecipe/AddRecipeScreen.js\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState } from 'react';\nimport Button from \"react-native-web/dist/exports/Button\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { firestoreDb } from \"../../FirebaseConfig\";\nimport { collection, addDoc, getDocs } from \"firebase/firestore\";\nimport * as ImagePicker from 'expo-image-picker';\nimport { firebaseStorage } from \"../../FirebaseConfig\";\nimport { ref, uploadBytes, getDownloadURL } from \"firebase/storage\";\nexport default function AddRecipeScreen() {\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      description = _useState2[0],\n      setDescription = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      time = _useState4[0],\n      setTime = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      title = _useState6[0],\n      setTitle = _useState6[1];\n\n  var _useState7 = useState(null),\n      _useState8 = _slicedToArray(_useState7, 2),\n      image = _useState8[0],\n      setImage = _useState8[1];\n\n  var recipeId = 300;\n  var styles = StyleSheet.create({\n    input: {\n      height: 40,\n      marginTop: 10,\n      marginBottom: 10,\n      borderWidth: 1,\n      padding: 10,\n      width: '100%'\n    },\n    headText: {\n      marginTop: 20,\n      fontSize: 30,\n      width: '100%',\n      textAlign: 'center'\n    },\n    imageButton: {\n      marginTop: 10\n    }\n  });\n\n  var pickImage = function pickImage() {\n    var result;\n    return _regeneratorRuntime.async(function pickImage$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(ImagePicker.launchImageLibraryAsync({\n              mediaTypes: ImagePicker.MediaTypeOptions.All,\n              allowsEditing: true,\n              aspect: [4, 3],\n              quality: 1,\n              base64: true\n            }));\n\n          case 2:\n            result = _context.sent;\n\n            if (!result.cancelled) {\n              setImage(result.uri);\n            }\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var onPressSend = function onPressSend() {\n    var docRef, querySnapshot, expoPushTokens, message;\n    return _regeneratorRuntime.async(function onPressSend$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            recipeId += 1;\n            _context3.next = 3;\n            return _regeneratorRuntime.awrap(addDoc(collection(firestoreDb, \"recipes\"), {\n              categoryId: \"3\",\n              description: description,\n              photo_url: 'https://firebasestorage.googleapis.com/v0/b/recipesapp-22bd1.appspot.com/o/cookie.jpg?alt=media&token=9e9fbf0b-a36d-45dd-a2fd-a4378186dc7c',\n              photoArray: [\"https://firebasestorage.googleapis.com/v0/b/recipesapp-22bd1.appspot.com/o/cookie.jpg?alt=media&token=9e9fbf0b-a36d-45dd-a2fd-a4378186dc7c\"],\n              recipeId: recipeId,\n              time: time,\n              title: title\n            }));\n\n          case 3:\n            docRef = _context3.sent;\n            console.log(\"Document written with ID: \", docRef.id);\n            _context3.next = 7;\n            return _regeneratorRuntime.awrap(getDocs(collection(firestoreDb, \"userData\")));\n\n          case 7:\n            querySnapshot = _context3.sent;\n            expoPushTokens = [];\n            _context3.next = 11;\n            return _regeneratorRuntime.awrap(querySnapshot.forEach(function _callee(doc) {\n              return _regeneratorRuntime.async(function _callee$(_context2) {\n                while (1) {\n                  switch (_context2.prev = _context2.next) {\n                    case 0:\n                      expoPushTokens.push(doc.data().expoToken);\n\n                    case 1:\n                    case \"end\":\n                      return _context2.stop();\n                  }\n                }\n              }, null, null, null, Promise);\n            }));\n\n          case 11:\n            console.log(expoPushTokens);\n            message = {\n              to: expoPushTokens,\n              sound: 'default',\n              title: 'Yeni Yemek Tarifi Eklendi',\n              body: 'Yeni yemek tarifini görmek için hemen giriş yap :)',\n              data: {\n                someData: 'goes here'\n              }\n            };\n            _context3.next = 15;\n            return _regeneratorRuntime.awrap(fetch('https://exp.host/--/api/v2/push/send', {\n              method: 'POST',\n              headers: {\n                Accept: 'application/json',\n                'Accept-encoding': 'gzip, deflate',\n                'Content-Type': 'application/json'\n              },\n              body: JSON.stringify(message)\n            }));\n\n          case 15:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var onPressSendWithImage = function onPressSendWithImage() {\n    var response, blob, name, storageRef;\n    return _regeneratorRuntime.async(function onPressSendWithImage$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            _context5.next = 2;\n            return _regeneratorRuntime.awrap(fetch(image));\n\n          case 2:\n            response = _context5.sent;\n            _context5.next = 5;\n            return _regeneratorRuntime.awrap(response.blob());\n\n          case 5:\n            blob = _context5.sent;\n            name = Math.random().toString(36).replace(/[^a-z]+/g, '').substr(0, 10);\n            storageRef = ref(firebaseStorage, \"uploadedImage/\" + name);\n            uploadBytes(storageRef, blob).then(function (snapshot) {\n              console.log('Image has been uploaded!!!');\n              getDownloadURL(ref(firebaseStorage, \"uploadedImage/\" + name)).then(function _callee2(url) {\n                var docRef;\n                return _regeneratorRuntime.async(function _callee2$(_context4) {\n                  while (1) {\n                    switch (_context4.prev = _context4.next) {\n                      case 0:\n                        recipeId += 1;\n                        _context4.next = 3;\n                        return _regeneratorRuntime.awrap(addDoc(collection(firestoreDb, \"recipes\"), {\n                          categoryId: \"3\",\n                          description: description,\n                          photo_url: url,\n                          photoArray: [url],\n                          recipeId: recipeId,\n                          time: time,\n                          title: title\n                        }));\n\n                      case 3:\n                        docRef = _context4.sent;\n                        console.log(\"Document written with ID: \", docRef.id);\n\n                      case 5:\n                      case \"end\":\n                        return _context4.stop();\n                    }\n                  }\n                }, null, null, null, Promise);\n              });\n            });\n\n          case 9:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  return React.createElement(SafeAreaView, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 5\n    }\n  }, React.createElement(Text, {\n    style: styles.headText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }\n  }, \"Yemek Tarifi Ekle\"), React.createElement(TextInput, {\n    style: styles.input,\n    onChangeText: setTitle,\n    value: title,\n    placeholder: \"Ba\\u015Fl\\u0131k girmelisin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 9\n    }\n  }), React.createElement(TextInput, {\n    style: styles.input,\n    onChangeText: setDescription,\n    value: description,\n    placeholder: \"A\\xE7\\u0131klama girmelisin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 9\n    }\n  }), React.createElement(TextInput, {\n    style: styles.input,\n    onChangeText: setTime,\n    value: time,\n    placeholder: \"Zaman girmelisin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 9\n    }\n  }), React.createElement(Button, {\n    onPress: onPressSend,\n    title: \"Ekle\",\n    color: \"#841584\",\n    accessibilityLabel: \"Ekle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 9\n    }\n  }), React.createElement(Button, {\n    title: \"Resim Ekle\",\n    onPress: pickImage,\n    style: styles.imageButton,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 9\n    }\n  }), image && React.createElement(Image, {\n    source: {\n      uri: image\n    },\n    style: {\n      width: 200,\n      height: 200\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 19\n    }\n  }), image && React.createElement(Button, {\n    onPress: onPressSendWithImage,\n    title: \"Resimle Ekle\",\n    color: \"#841584\",\n    accessibilityLabel: \"Resimle Ekle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 19\n    }\n  }));\n}","map":{"version":3,"sources":["/Users/fatmabetuluyar/Downloads/firebase-push-notification-recipes-app/src/screens/AddRecipe/AddRecipeScreen.js"],"names":["React","useState","firestoreDb","collection","addDoc","getDocs","ImagePicker","firebaseStorage","ref","uploadBytes","getDownloadURL","AddRecipeScreen","description","setDescription","time","setTime","title","setTitle","image","setImage","recipeId","styles","StyleSheet","create","input","height","marginTop","marginBottom","borderWidth","padding","width","headText","fontSize","textAlign","imageButton","pickImage","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","All","allowsEditing","aspect","quality","base64","result","cancelled","uri","onPressSend","categoryId","photo_url","photoArray","docRef","console","log","id","querySnapshot","expoPushTokens","forEach","doc","push","data","expoToken","message","to","sound","body","someData","fetch","method","headers","Accept","JSON","stringify","onPressSendWithImage","response","blob","name","Math","random","toString","replace","substr","storageRef","then","snapshot","url"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { Button, TextInput, StyleSheet, SafeAreaView, Text, Image } from 'react-native';\nimport { firestoreDb } from '../../FirebaseConfig'\nimport { collection, addDoc,getDocs} from \"firebase/firestore\"; \nimport * as ImagePicker from 'expo-image-picker';\nimport { firebaseStorage } from '../../FirebaseConfig'\nimport { ref, uploadBytes, getDownloadURL } from \"firebase/storage\";\n\nexport default function AddRecipeScreen() {\n  const [description, setDescription] = useState(\"\");\n  const [time, setTime] = useState(\"\");\n  const [title, setTitle] = useState(\"\");\n  const [image, setImage] = useState(null);\n\n  let recipeId = 300;\n\n  const styles = StyleSheet.create({\n    input: {\n      height: 40,\n      marginTop : 10,\n      marginBottom : 10,\n      borderWidth: 1,\n      padding: 10,\n      width : '100%'\n    },\n    headText : {\n      marginTop: 20,\n      fontSize : 30,\n      width : '100%',\n      textAlign : 'center'\n    },\n    imageButton : {\n      marginTop : 10\n    }\n  });\n\n  const pickImage = async () => {\n    let result = await ImagePicker.launchImageLibraryAsync({\n      mediaTypes: ImagePicker.MediaTypeOptions.All,\n      allowsEditing: true,\n      aspect: [4, 3],\n      quality: 1,\n      base64: true\n    });\n\n    if (!result.cancelled) {\n      setImage(result.uri);\n    }\n  };\n\n  const onPressSend = async () => {\n    recipeId += 1;\n\n    // WRITE DATA\n    const docRef = await addDoc(collection(firestoreDb, \"recipes\"), {\n      categoryId : \"3\",\n      description : description,\n      photo_url : 'https://firebasestorage.googleapis.com/v0/b/recipesapp-22bd1.appspot.com/o/cookie.jpg?alt=media&token=9e9fbf0b-a36d-45dd-a2fd-a4378186dc7c',\n      photoArray : [\"https://firebasestorage.googleapis.com/v0/b/recipesapp-22bd1.appspot.com/o/cookie.jpg?alt=media&token=9e9fbf0b-a36d-45dd-a2fd-a4378186dc7c\"],\n      recipeId : recipeId,\n      time : time,\n      title: title\n    });\n\n    console.log(\"Document written with ID: \", docRef.id);\n\n    // PUSH NOTIFICATION\n    const querySnapshot = await getDocs(collection(firestoreDb, \"userData\"));\n\n    var expoPushTokens = [];\n    await querySnapshot.forEach(async (doc) => {\n      expoPushTokens.push(doc.data().expoToken);\n    });\n\n    console.log(expoPushTokens)\n    \n    const message = {\n      to: expoPushTokens,\n      sound: 'default',\n      title: 'Yeni Yemek Tarifi Eklendi',\n      body: 'Yeni yemek tarifini görmek için hemen giriş yap :)',\n      data: { someData: 'goes here' },\n    };\n  \n    await fetch('https://exp.host/--/api/v2/push/send', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json',\n        'Accept-encoding': 'gzip, deflate',\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(message),\n    });\n  }\n\n  const onPressSendWithImage = async () => {\n    const response = await fetch(image); \n    const blob = await response.blob();\n    \n    var name = Math.random().toString(36).replace(/[^a-z]+/g, '').substr(0, 10);\n    const storageRef = ref(firebaseStorage, \"uploadedImage/\" + name);\n\n    uploadBytes(storageRef, blob).then((snapshot) => {\n      console.log('Image has been uploaded!!!');\n      \n      getDownloadURL(ref(firebaseStorage, \"uploadedImage/\" + name))\n      .then(async (url) => {\n        recipeId += 1;\n\n        const docRef = await addDoc(collection(firestoreDb, \"recipes\"), {\n          categoryId : \"3\",\n          description : description,\n          photo_url : url,\n          photoArray : [url],\n          recipeId : recipeId,\n          time : time,\n          title: title\n        });\n        console.log(\"Document written with ID: \", docRef.id);\n      });\n    });\n  }\n\n  return (\n    <SafeAreaView>\n      <Text style= {styles.headText}>Yemek Tarifi Ekle</Text>\n        <TextInput  \n          style={styles.input}\n          onChangeText={setTitle}\n          value={title}\n          placeholder = 'Başlık girmelisin'\n        />\n        <TextInput  \n          style={styles.input}\n          onChangeText={setDescription}\n          value={description}\n          placeholder = 'Açıklama girmelisin'\n        />\n        <TextInput  \n          style={styles.input}\n          onChangeText={setTime}\n          value={time}\n          placeholder = 'Zaman girmelisin'\n        />\n        <Button\n          onPress={onPressSend}\n          title=\"Ekle\"\n          color=\"#841584\"\n          accessibilityLabel=\"Ekle\"\n        />\n        <Button title=\"Resim Ekle\" onPress={pickImage} style={styles.imageButton}/>\n        {image && <Image source={{ uri: image }} style={{width: 200, height: 200 }} />}\n        {image && <Button\n          onPress={onPressSendWithImage}\n          title=\"Resimle Ekle\"\n          color=\"#841584\"\n          accessibilityLabel=\"Resimle Ekle\"\n        />}\n    </SafeAreaView>\n  );\n}\n\n"]},"metadata":{},"sourceType":"module"}